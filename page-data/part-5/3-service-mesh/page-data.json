{"componentChunkName":"component---src-templates-course-content-template-js","path":"/part-5/3-service-mesh","result":{"data":{"page":{"htmlAst":{"type":"element","tagName":"div","properties":{},"children":[{"type":"element","tagName":"text-box","properties":{"variant":"learningObjectives","name":"Learning Objectives"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After this section, you can"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Setup a service mesh and use it to monitor network traffic"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You'll hear quite often about a concept called "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Service Mesh"}]},{"type":"text","value":". Service meshes are quite complex animals that provide a large feature set for apps. During parts 1 to 4 we have implemented a few features that service meshes would have offered out of the box. The following video by Microsoft Developer is an excellent walkthrough of all of the features a service mesh has."}]},{"type":"element","tagName":"iframe","properties":{"width":560,"height":315,"src":"https://www.youtube-nocookie.com/embed/izVWk7rYqWI","frameBorder":"0","allow":"accelerometer; encrypted-media; gyroscope; picture-in-picture","allowFullScreen":true},"children":[]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It might also be worthwhile to read the article "},{"type":"element","tagName":"a","properties":{"href":"https://linkerd.io/what-is-a-service-mesh/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"What is a service mesh?"}]},{"type":"text","value":" by Linkerd."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For incoming and outgoing traffic and for communication between services a service mesh can:"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"secure the communication"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"manage traffic"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"monitor traffic, sending logs and metrics to e.g. Prometheus"}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So a service mesh is an "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"extremely"}]},{"type":"text","value":" powerful tool. If we started using service mesh like "},{"type":"element","tagName":"a","properties":{"href":"https://istio.io/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Istio"}]},{"type":"text","value":" in part 1 we may have been able to skip using "},{"type":"element","tagName":"a","properties":{"href":"https://doc.traefik.io/traefik/providers/kubernetes-ingress/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Traefik"}]},{"type":"text","value":", skip some of our DIY monitoring solutions, and achieve canary releases without "},{"type":"element","tagName":"a","properties":{"href":"https://argoproj.github.io/rollouts/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Argo Rollouts"}]},{"type":"text","value":". On the other hand, we managed to do all that without a service meshes."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's install a service mesh and test the features. Our choice will be "},{"type":"element","tagName":"a","properties":{"href":"https://linkerd.io/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Linkerd"}]},{"type":"text","value":", mainly because it's lightweight compared to "},{"type":"element","tagName":"a","properties":{"href":"https://istio.io/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Istio"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Linkerd has a CLI tool to help us, follow now the "},{"type":"element","tagName":"a","properties":{"href":"https://linkerd.io/2/getting-started/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"getting started"}]},{"type":"text","value":" guide until Step 4."}]},{"type":"element","tagName":"text-box","properties":{"name":"Alternate sources","variant":"hint"},"children":[{"type":"text","value":"\n We are actually simply following through the whole getting started guide, so you can read through it if you wish.\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's look at our application, this time we'll use this microservice application for voting emojis: "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/BuoyantIO/emojivoto","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://github.com/BuoyantIO/emojivoto"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"console"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-console"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-console"]},"children":[{"type":"text","value":"$ kubectl apply -f https://raw.githubusercontent.com/BuoyantIO/emojivoto/main/kustomize/deployment/ns.yml \\\n                -f https://raw.githubusercontent.com/BuoyantIO/emojivoto/main/kustomize/deployment/web.yml \\\n                -f https://raw.githubusercontent.com/BuoyantIO/emojivoto/main/kustomize/deployment/emoji.yml \\\n                -f https://raw.githubusercontent.com/BuoyantIO/emojivoto/main/kustomize/deployment/voting.yml \\\n                -f https://raw.githubusercontent.com/BuoyantIO/emojivoto/main/kustomize/deployment/vote-bot.yml\n\n$ kubectl get all -n emojivoto\n  NAME                            READY   STATUS    RESTARTS   AGE\n  pod/web-7bcb54cb8b-cjw7d        1/1     Running   1          3d21h\n  pod/emoji-686f74d889-rcdsh      1/1     Running   1          3d21h\n  pod/vote-bot-74d97c76c6-pcsfl   1/1     Running   1          3d21h\n  pod/voting-56847f699b-2nzqn     1/1     Running   1          3d21h\n\n  NAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGE\n  service/web-svc      ClusterIP   10.43.248.111   <none>        80/TCP              3d21h\n  service/emoji-svc    ClusterIP   10.43.110.235   <none>        8080/TCP,8801/TCP   3d21h\n  service/voting-svc   ClusterIP   10.43.111.57    <none>        8080/TCP,8801/TCP   3d21h\n\n  NAME                       READY   UP-TO-DATE   AVAILABLE   AGE\n  deployment.apps/emoji      1/1     1            1           3d21h\n  deployment.apps/vote-bot   1/1     1            1           3d21h\n  deployment.apps/web        1/1     1            1           3d21h\n  deployment.apps/voting     1/1     1            1           3d21h"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Here we see the \"vote-bot\" deployment that automatically generates traffic. The README tells us that it votes Donut üç© 15% of the time and the rest randomly."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Since it already has a service, we're only missing an ingress."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"ingress.yaml"}]}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yaml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yaml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"apiVersion"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" networking.k8s.io/v1\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"kind"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Ingress\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" web"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"ingress\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"namespace"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" emojivoto\n"},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spec"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"rules"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"http"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"paths"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"path"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" /\n        "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"pathType"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Prefix\n        "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"backend"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n          "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"service"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" web"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"svc\n            "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"port"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n              "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"number"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"80"}]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"And it becomes available for us in "},{"type":"element","tagName":"a","properties":{"href":"http://localhost:8081","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"http://localhost:8081"}]},{"type":"text","value":". However, there's something strange going on! You can figure it out by watching the leaderboards and knowing where the votes are going, or by clicking every single emoji yourself."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's see if there's a better way to detect the behavior and figure out what's wrong. Linkerd offers us a dashboard through an extension called "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"viz"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"$ linkerd viz install | kubectl apply -f -\n  ...\n\n$ linkerd viz dashboard"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It should open your browser window. Click the \"emojivoto\" namespace (to reach /namespaces/emojivoto) we'll notice that the resources in emojivoto namespace are not in the service mesh yet. This is due to the fact that they do not have the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"sidecar container"}]},{"type":"text","value":" in the pods. "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/workloads/pods/sidecar-containers/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Sidecar containers"}]},{"type":"text","value":" are a commonly used pattern where a new container is added to the pod to add more functionality to the pod. Let's add Linkerd sidecars to emojivoto."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The state of the pods before:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"$ kubectl get po -n emojivoto\n  NAME                        READY   STATUS    RESTARTS   AGE\n  voting-f999bd4d7-r4mct      1/1     Running   0          10m\n  web-79469b946f-ksprv        1/1     Running   0          10m\n  emoji-66ccdb4d86-rhcnf      1/1     Running   0          10m\n  vote-bot-69754c864f-g24jt   1/1     Running   0          10m"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The spell to add Linkerd to the deployments and then apply the deployments."}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"$¬†kubectl get -n emojivoto deploy -o yaml \\\n    | linkerd inject - \\\n    | kubectl apply -f -"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can run the rows independently to see what they do. The first, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl get -n emojivoto deploy -o yaml"}]},{"type":"text","value":", will output all deployments in the emojivoto namespace. The "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"linkerd inject -"}]},{"type":"text","value":" will add an annotation to instruct Linkerd to add the sidecar proxy container. Finally, the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"kubectl apply"}]},{"type":"text","value":" will apply modified deployments. Now the pods look like this:"}]},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"kubectl get po -n emojivoto\nNAME                        READY   STATUS    RESTARTS   AGE\nvote-bot-6d7677bb68-qxfx9   2/2     Running   0          3m17s\nweb-5f86686c4d-qgxtv        2/2     Running   0          3m17s\nemoji-696d9d8f95-sgzqs      2/2     Running   0          3m17s\nvoting-ff4c54b8d-sf99j      2/2     Running   0          3m18s"}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Also, if you now look at the dashboard you'll see a lot more information as the old deployments were replaced by the meshed ones. We also notice that the success rate is less than stellar."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Two services have a success rate below 100%. As the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"web"}]},{"type":"text","value":" is most likely just propagating the error from "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"voting"}]},{"type":"text","value":" we can click either of the services and you should quickly see which request is failing."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Service meshes can be powerful tools as they can help you connect and observe your services. Read now\n"},{"type":"element","tagName":"a","properties":{"href":"https://linkerd.io/2.15/tasks/debugging-your-service/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" to see how Linkerd can be used to debug the issues in the emoji voting app."}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 5.02: Project, the Service Mesh Edition"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"  Enable the Linkerd service mesh for "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"The Project"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"  Deployments are mostly trivial to move to Linkerd. Read "},{"type":"element","tagName":"a","properties":{"href":"https://linkerd.io/2/tasks/adding-your-service/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"this"}]},{"type":"text","value":", and add the modified manifests (through Linkerd inject) to the repository for submission."}]}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 5.03: Learn from external material"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"  To illustrate how canary releases work in Service Meshes follow through task here: "},{"type":"element","tagName":"a","properties":{"href":"https://linkerd.io/2/tasks/canary-release/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://linkerd.io/2/tasks/canary-release/"}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"  It is enough to just follow one example "},{"type":"element","tagName":"a","properties":{"href":"https://linkerd.io/2.15/tasks/flagger/#flagger","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Flagger"}]},{"type":"text","value":" of "},{"type":"element","tagName":"a","properties":{"href":"https://linkerd.io/2.15/tasks/flagger/#argo-rollouts","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Argo Rollouts"}]},{"type":"text","value":", which is already familiar to us from "},{"type":"element","tagName":"a","properties":{"href":"/part-4/1-update-strategies-and-prometheus#canary-release"},"children":[{"type":"text","value":"part 4"}]},{"type":"text","value":"."}]},{"type":"element","tagName":"div","properties":{},"children":[{"type":"text","value":"  Use "},{"type":"element","tagName":"a","properties":{"href":"https://man7.org/linux/man-pages/man1/script.1.html"},"children":[{"type":"text","value":"script"}]},{"type":"text","value":" command during the exercise to have something to submit. Or just take a screenshot at the end."}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ok, we are done for now. Do you need a service mesh for your app? Most likely not... unless you are working with an enterprise-level setting."}]},{"type":"element","tagName":"h3","properties":{"id":"one-more-thing-init-containers-and-sidecars","style":"position:relative;"},"children":[{"type":"text","value":"One more thing... init containers and sidecars"},{"type":"element","tagName":"a","properties":{"href":"#one-more-thing-init-containers-and-sidecars","ariaLabel":"one more thing init containers and sidecars permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Under the hood, Linkerd relies heavily on Init containers and Sidecar containers to do its magic.\nLet us have now a closer look at these pretty important concepts."}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A pod can have any number of "},{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/workloads/pods/init-containers/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"init containers"}]},{"type":"text","value":" which are containers that run before the containers of the pod start. There are many uses for init containers. Those can eg."}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"generate or modify configuration files, fetch data or configuration settings from remote sources, or perform any necessary pre-processing before the main application starts"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"wait for other services, databases, or infrastructure components to be up and operational before the application starts. This ensures the main containers only start when all dependencies are ready"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"install or set up utilities, toolchains, or software that are required by the main application at runtime but not included in the main application image, keeping the main container image lean and optimized"}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://kubernetes.io/docs/concepts/workloads/pods/sidecar-containers/","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"Sidecar"}]},{"type":"text","value":" containers are the secondary containers that run along with the main application container within the same Pod. These containers are used to enhance or to extend the functionality of the primary app container by providing additional services, or functionality such as logging, monitoring, security, or data synchronization, without directly altering the primary application code."}]},{"type":"element","tagName":"exercise","properties":{"name":"Exercise 5.04: Wikipedia with init and sidecar"},"children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Write an app that serves Wikipedia pages. The app should contain"}]},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"the main container based on "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"nginx"}]},{"type":"text","value":" image, that just serves whatever content it has in the public www location"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"init container that curls page "},{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/Kubernetes","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://en.wikipedia.org/wiki/Kubernetes"}]},{"type":"text","value":" and saves the page content to the public www directory for the main container"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"a sidecar container that waits for a random time between 5 and 15 minutes, curls for a random Wikipedia page in URL  "},{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/Special:Random","target":"_blank","rel":["noopener","noreferrer"]},"children":[{"type":"text","value":"https://en.wikipedia.org/wiki/Special:Random"}]},{"type":"text","value":" and saves the page content to the public www directory for the main container"}]},{"type":"text","value":"\n"}]},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Hint: you might need to refresh your memory by reading "},{"type":"element","tagName":"a","properties":{"href":"/part-1/4-introduction-to-storage#volumes"},"children":[{"type":"text","value":"this"}]},{"type":"text","value":" from part 1 of the course."}]}]}]},"html":"<div><text-box variant='learningObjectives' name='Learning Objectives'><p>After this section, you can</p><ul>\n<li>Setup a service mesh and use it to monitor network traffic</li>\n</ul></text-box><p>You'll hear quite often about a concept called <em>Service Mesh</em>. Service meshes are quite complex animals that provide a large feature set for apps. During parts 1 to 4 we have implemented a few features that service meshes would have offered out of the box. The following video by Microsoft Developer is an excellent walkthrough of all of the features a service mesh has.</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/izVWk7rYqWI\" frameborder=\"0\" allow=\"accelerometer; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe><p>It might also be worthwhile to read the article <a href=\"https://linkerd.io/what-is-a-service-mesh/\" target=\"_blank\" rel=\"noopener noreferrer\">What is a service mesh?</a> by Linkerd.</p><p>For incoming and outgoing traffic and for communication between services a service mesh can:</p><ul>\n<li>secure the communication</li>\n<li>manage traffic</li>\n<li>monitor traffic, sending logs and metrics to e.g. Prometheus</li>\n</ul><p>So a service mesh is an <strong>extremely</strong> powerful tool. If we started using service mesh like <a href=\"https://istio.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Istio</a> in part 1 we may have been able to skip using <a href=\"https://doc.traefik.io/traefik/providers/kubernetes-ingress/\" target=\"_blank\" rel=\"noopener noreferrer\">Traefik</a>, skip some of our DIY monitoring solutions, and achieve canary releases without <a href=\"https://argoproj.github.io/rollouts/\" target=\"_blank\" rel=\"noopener noreferrer\">Argo Rollouts</a>. On the other hand, we managed to do all that without a service meshes.</p><p>Let's install a service mesh and test the features. Our choice will be <a href=\"https://linkerd.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Linkerd</a>, mainly because it's lightweight compared to <a href=\"https://istio.io/\" target=\"_blank\" rel=\"noopener noreferrer\">Istio</a>.</p><p>Linkerd has a CLI tool to help us, follow now the <a href=\"https://linkerd.io/2/getting-started/\" target=\"_blank\" rel=\"noopener noreferrer\">getting started</a> guide until Step 4.</p><text-box name=\"Alternate sources\" variant=\"hint\">\n We are actually simply following through the whole getting started guide, so you can read through it if you wish.\n</text-box><p>Let's look at our application, this time we'll use this microservice application for voting emojis: <a href=\"https://github.com/BuoyantIO/emojivoto\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/BuoyantIO/emojivoto</a>.</p><div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">$ kubectl apply -f https://raw.githubusercontent.com/BuoyantIO/emojivoto/main/kustomize/deployment/ns.yml \\\n                -f https://raw.githubusercontent.com/BuoyantIO/emojivoto/main/kustomize/deployment/web.yml \\\n                -f https://raw.githubusercontent.com/BuoyantIO/emojivoto/main/kustomize/deployment/emoji.yml \\\n                -f https://raw.githubusercontent.com/BuoyantIO/emojivoto/main/kustomize/deployment/voting.yml \\\n                -f https://raw.githubusercontent.com/BuoyantIO/emojivoto/main/kustomize/deployment/vote-bot.yml\n\n$ kubectl get all -n emojivoto\n  NAME                            READY   STATUS    RESTARTS   AGE\n  pod/web-7bcb54cb8b-cjw7d        1/1     Running   1          3d21h\n  pod/emoji-686f74d889-rcdsh      1/1     Running   1          3d21h\n  pod/vote-bot-74d97c76c6-pcsfl   1/1     Running   1          3d21h\n  pod/voting-56847f699b-2nzqn     1/1     Running   1          3d21h\n\n  NAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGE\n  service/web-svc      ClusterIP   10.43.248.111   &lt;none&gt;        80/TCP              3d21h\n  service/emoji-svc    ClusterIP   10.43.110.235   &lt;none&gt;        8080/TCP,8801/TCP   3d21h\n  service/voting-svc   ClusterIP   10.43.111.57    &lt;none&gt;        8080/TCP,8801/TCP   3d21h\n\n  NAME                       READY   UP-TO-DATE   AVAILABLE   AGE\n  deployment.apps/emoji      1/1     1            1           3d21h\n  deployment.apps/vote-bot   1/1     1            1           3d21h\n  deployment.apps/web        1/1     1            1           3d21h\n  deployment.apps/voting     1/1     1            1           3d21h</code></pre></div><p>Here we see the \"vote-bot\" deployment that automatically generates traffic. The README tells us that it votes Donut üç© 15% of the time and the rest randomly.</p><p>Since it already has a service, we're only missing an ingress.</p><p><strong>ingress.yaml</strong></p><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Ingress\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> web<span class=\"token punctuation\">-</span>ingress\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> emojivoto\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">http</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /\n        <span class=\"token key atrule\">pathType</span><span class=\"token punctuation\">:</span> Prefix\n        <span class=\"token key atrule\">backend</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> web<span class=\"token punctuation\">-</span>svc\n            <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div><p>And it becomes available for us in <a href=\"http://localhost:8081\" target=\"_blank\" rel=\"noopener noreferrer\">http://localhost:8081</a>. However, there's something strange going on! You can figure it out by watching the leaderboards and knowing where the votes are going, or by clicking every single emoji yourself.</p><p>Let's see if there's a better way to detect the behavior and figure out what's wrong. Linkerd offers us a dashboard through an extension called <code class=\"language-text\">viz</code>.</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ linkerd viz install | kubectl apply -f -\n  ...\n\n$ linkerd viz dashboard</code></pre></div><p>It should open your browser window. Click the \"emojivoto\" namespace (to reach /namespaces/emojivoto) we'll notice that the resources in emojivoto namespace are not in the service mesh yet. This is due to the fact that they do not have the <code class=\"language-text\">sidecar container</code> in the pods. <a href=\"https://kubernetes.io/docs/concepts/workloads/pods/sidecar-containers/\" target=\"_blank\" rel=\"noopener noreferrer\">Sidecar containers</a> are a commonly used pattern where a new container is added to the pod to add more functionality to the pod. Let's add Linkerd sidecars to emojivoto.</p><p>The state of the pods before:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ kubectl get po -n emojivoto\n  NAME                        READY   STATUS    RESTARTS   AGE\n  voting-f999bd4d7-r4mct      1/1     Running   0          10m\n  web-79469b946f-ksprv        1/1     Running   0          10m\n  emoji-66ccdb4d86-rhcnf      1/1     Running   0          10m\n  vote-bot-69754c864f-g24jt   1/1     Running   0          10m</code></pre></div><p>The spell to add Linkerd to the deployments and then apply the deployments.</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$¬†kubectl get -n emojivoto deploy -o yaml \\\n    | linkerd inject - \\\n    | kubectl apply -f -</code></pre></div><p>You can run the rows independently to see what they do. The first, <code class=\"language-text\">kubectl get -n emojivoto deploy -o yaml</code>, will output all deployments in the emojivoto namespace. The <code class=\"language-text\">linkerd inject -</code> will add an annotation to instruct Linkerd to add the sidecar proxy container. Finally, the <em>kubectl apply</em> will apply modified deployments. Now the pods look like this:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl get po -n emojivoto\nNAME                        READY   STATUS    RESTARTS   AGE\nvote-bot-6d7677bb68-qxfx9   2/2     Running   0          3m17s\nweb-5f86686c4d-qgxtv        2/2     Running   0          3m17s\nemoji-696d9d8f95-sgzqs      2/2     Running   0          3m17s\nvoting-ff4c54b8d-sf99j      2/2     Running   0          3m18s</code></pre></div><p>Also, if you now look at the dashboard you'll see a lot more information as the old deployments were replaced by the meshed ones. We also notice that the success rate is less than stellar.</p><p>Two services have a success rate below 100%. As the <em>web</em> is most likely just propagating the error from <em>voting</em> we can click either of the services and you should quickly see which request is failing.</p><p>Service meshes can be powerful tools as they can help you connect and observe your services. Read now\n<a href=\"https://linkerd.io/2.15/tasks/debugging-your-service/\" target=\"_blank\" rel=\"noopener noreferrer\">this</a> to see how Linkerd can be used to debug the issues in the emoji voting app.</p><exercise name='Exercise 5.02: Project, the Service Mesh Edition'><p>  Enable the Linkerd service mesh for <em>The Project</em>.</p><p>  Deployments are mostly trivial to move to Linkerd. Read <a href=\"https://linkerd.io/2/tasks/adding-your-service/\" target=\"_blank\" rel=\"noopener noreferrer\">this</a>, and add the modified manifests (through Linkerd inject) to the repository for submission.</p></exercise><exercise name='Exercise 5.03: Learn from external material'><p>  To illustrate how canary releases work in Service Meshes follow through task here: <a href=\"https://linkerd.io/2/tasks/canary-release/\" target=\"_blank\" rel=\"noopener noreferrer\">https://linkerd.io/2/tasks/canary-release/</a></p><p>  It is enough to just follow one example <a href=\"https://linkerd.io/2.15/tasks/flagger/#flagger\" target=\"_blank\" rel=\"noopener noreferrer\">Flagger</a> of <a href=\"https://linkerd.io/2.15/tasks/flagger/#argo-rollouts\" target=\"_blank\" rel=\"noopener noreferrer\">Argo Rollouts</a>, which is already familiar to us from <a href=\"/part-4/1-update-strategies-and-prometheus#canary-release\">part 4</a>.</p><div>  Use <a href=\"https://man7.org/linux/man-pages/man1/script.1.html\">script</a> command during the exercise to have something to submit. Or just take a screenshot at the end.</div></exercise><p>Ok, we are done for now. Do you need a service mesh for your app? Most likely not... unless you are working with an enterprise-level setting.</p><h3 id=\"one-more-thing-init-containers-and-sidecars\" style=\"position:relative;\">One more thing... init containers and sidecars<a href=\"#one-more-thing-init-containers-and-sidecars\" aria-label=\"one more thing init containers and sidecars permalink\" class=\"anchor after\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3><p>Under the hood, Linkerd relies heavily on Init containers and Sidecar containers to do its magic.\nLet us have now a closer look at these pretty important concepts.</p><p>A pod can have any number of <a href=\"https://kubernetes.io/docs/concepts/workloads/pods/init-containers/\" target=\"_blank\" rel=\"noopener noreferrer\">init containers</a> which are containers that run before the containers of the pod start. There are many uses for init containers. Those can eg.</p><ul>\n<li>generate or modify configuration files, fetch data or configuration settings from remote sources, or perform any necessary pre-processing before the main application starts</li>\n<li>wait for other services, databases, or infrastructure components to be up and operational before the application starts. This ensures the main containers only start when all dependencies are ready</li>\n<li>install or set up utilities, toolchains, or software that are required by the main application at runtime but not included in the main application image, keeping the main container image lean and optimized</li>\n</ul><p><a href=\"https://kubernetes.io/docs/concepts/workloads/pods/sidecar-containers/\" target=\"_blank\" rel=\"noopener noreferrer\">Sidecar</a> containers are the secondary containers that run along with the main application container within the same Pod. These containers are used to enhance or to extend the functionality of the primary app container by providing additional services, or functionality such as logging, monitoring, security, or data synchronization, without directly altering the primary application code.</p><exercise name='Exercise 5.04: Wikipedia with init and sidecar'><p>Write an app that serves Wikipedia pages. The app should contain</p><ul>\n<li>the main container based on <em>nginx</em> image, that just serves whatever content it has in the public www location</li>\n<li>init container that curls page <a href=\"https://en.wikipedia.org/wiki/Kubernetes\" target=\"_blank\" rel=\"noopener noreferrer\">https://en.wikipedia.org/wiki/Kubernetes</a> and saves the page content to the public www directory for the main container</li>\n<li>a sidecar container that waits for a random time between 5 and 15 minutes, curls for a random Wikipedia page in URL  <a href=\"https://en.wikipedia.org/wiki/Special:Random\" target=\"_blank\" rel=\"noopener noreferrer\">https://en.wikipedia.org/wiki/Special:Random</a> and saves the page content to the public www directory for the main container</li>\n</ul><p>Hint: you might need to refresh your memory by reading <a href=\"/part-1/4-introduction-to-storage#volumes\">this</a> from part 1 of the course.</p></exercise></div>","frontmatter":{"path":"/part-5/3-service-mesh","title":"Service Mesh"},"fileAbsolutePath":"/home/runner/work/kubernetes-hy.github.io/kubernetes-hy.github.io/data/part-5/3-service-mesh.md"},"allPages":{"edges":[{"node":{"id":"e4e5fe1c-25b1-57b3-87eb-e204e767a49c","frontmatter":{"path":"/faq","title":"FAQ"}}},{"node":{"id":"ecaa7011-87db-5ece-9b3c-1cfad638324a","frontmatter":{"path":"/","title":"Homepage"}}},{"node":{"id":"9f6e26aa-46a9-523d-96e4-a57c65ec083d","frontmatter":{"path":"/frontmatter-guide","title":"Frontmatter-guide"}}},{"node":{"id":"3d7eac33-2990-59d1-a002-64e0b0f4f370","frontmatter":{"path":"/known-problems-solutions","title":"Issues you may face"}}},{"node":{"id":"57c61ed7-37c4-5d0f-acd8-1dca0de6be4a","frontmatter":{"path":"/registration-and-completion","title":"Registration and Completion"}}},{"node":{"id":"fb4fb717-329a-5d49-94c3-183aa16507e2","frontmatter":{"path":"/unity-assignment","title":"Unity Assignment"}}},{"node":{"id":"8ecc11b1-3298-589e-b97a-2a3a36861b8d","frontmatter":{"path":"/sanasto","title":"Sanasto"}}},{"node":{"id":"dab4b6a7-96cf-5efe-83f4-f5199c283e65","frontmatter":{"path":"/part-0","title":"Part 0"}}},{"node":{"id":"fe4a80ee-85ba-536e-bbf5-c5695399f40f","frontmatter":{"path":"/part-1","title":"Part 1"}}},{"node":{"id":"78948204-39a7-5f81-b9f4-3029400d5f82","frontmatter":{"path":"/part-1/2-introduction-to-debugging","title":"Introduction to Debugging"}}},{"node":{"id":"0b237cfb-5f2a-5d8e-9aa0-0cf9b045db3a","frontmatter":{"path":"/part-1/5-summary","title":"Summary"}}},{"node":{"id":"19841be9-897c-577a-9f82-5a7381bc073c","frontmatter":{"path":"/part-2/1-networking-between-pods","title":"Networking between pods"}}},{"node":{"id":"f802a4ea-8d5a-503f-ad7b-d0138ab84c80","frontmatter":{"path":"/part-2/6-summary","title":"Summary"}}},{"node":{"id":"56f2a7a2-c9e2-5bbb-b6a7-76fd46592c69","frontmatter":{"path":"/part-2/5-monitoring","title":"Monitoring"}}},{"node":{"id":"b810e0d9-0ac2-5073-a9dc-4ffd6649b7f7","frontmatter":{"path":"/part-2","title":"Part 2"}}},{"node":{"id":"708df9d2-30d1-518f-8066-80109a75c4dc","frontmatter":{"path":"/part-3","title":"Part 3"}}},{"node":{"id":"40440141-c1a8-5723-858a-eea86119b5b6","frontmatter":{"path":"/part-3/4-summary","title":"Summary"}}},{"node":{"id":"47a288aa-ece4-5ba6-ab6e-cbc63dbdc752","frontmatter":{"path":"/part-4/4-summary","title":"Summary"}}},{"node":{"id":"c8b1eb5e-3c98-59b3-b6e9-6173791d7e34","frontmatter":{"path":"/part-4","title":"Part 4"}}},{"node":{"id":"471982cb-da12-5799-a6b2-fa8a3e67aa0d","frontmatter":{"path":"/part-5/4-beyond-kubernetes","title":"Beyond Kubernetes"}}},{"node":{"id":"7bebb01b-c990-5e7e-a9aa-d60f10ba63dd","frontmatter":{"path":"/part-5/5-summary","title":"Summary and end"}}},{"node":{"id":"e4c53dca-867f-5293-9b28-657b695cd3f3","frontmatter":{"path":"/part-1/3-introduction-to-networking","title":"Introduction to Networking"}}},{"node":{"id":"fd6ebeaa-c808-5f11-9bdc-30e4f69b8a2a","frontmatter":{"path":"/part-1/4-introduction-to-storage","title":"Introduction to Storage"}}},{"node":{"id":"9e4ff8d0-2e6c-5d55-83a0-16ada460096d","frontmatter":{"path":"/part-2/2-organizing-a-cluster","title":"Organizing a cluster"}}},{"node":{"id":"0353d158-f751-57fd-94ce-373924da1b05","frontmatter":{"path":"/part-2/3-configuring-applications","title":"Configuring applications"}}},{"node":{"id":"eae6660d-1d18-527a-bc1c-0f2f7ab54c6d","frontmatter":{"path":"/part-2/4-statefulsets-and-jobs","title":"StatefulSets and Jobs"}}},{"node":{"id":"9f3c6f02-668a-517b-b7b6-1828f74c7200","frontmatter":{"path":"/part-3/1-introduction-to-gke","title":"Introduction to Google Kubernetes Engine"}}},{"node":{"id":"78f84327-bd7b-5b5d-941d-9fae8bca88d3","frontmatter":{"path":"/part-3/3-gke-features","title":"GKE features"}}},{"node":{"id":"e80b74e8-a23b-5d3c-808b-833a72ac739c","frontmatter":{"path":"/part-3/2-deployment-pipeline","title":"Deployment Pipeline"}}},{"node":{"id":"0a2d8cfd-8e40-59a7-a688-e8bdc9fb9e3a","frontmatter":{"path":"/part-4/3-gitops","title":"GitOps"}}},{"node":{"id":"a899eeb2-4329-5c9b-aadf-2fb803fa9142","frontmatter":{"path":"/part-5/2-custom-resource-definitions","title":"Custom Resource Definitions"}}},{"node":{"id":"8a2e40fa-1703-5755-aa66-ac69bf2e291d","frontmatter":{"path":"/part-5/3-service-mesh","title":"Service Mesh"}}},{"node":{"id":"39fb03b7-2abe-515a-a543-b812fcbfdba5","frontmatter":{"path":"/part-5/1-kubernetes-internals","title":"Kubernetes Internals"}}},{"node":{"id":"cbd58376-8d52-5297-b38d-653179a1226f","frontmatter":{"path":"/part-5","title":"Part 5"}}},{"node":{"id":"da15a80e-5316-5986-afcf-75d521065017","frontmatter":{"path":"/part-1/1-first-deploy","title":"First Deploy"}}},{"node":{"id":"33c86b5c-3684-5006-b4e7-dbd0c7cc04bc","frontmatter":{"path":"/part-4/1-update-strategies-and-prometheus","title":"Update Strategies and Prometheus"}}},{"node":{"id":"f5314214-d779-5fb4-a19f-ab7442f3fbb2","frontmatter":{"path":"/part-4/2-messaging-systems","title":"Messaging Systems"}}}]}},"pageContext":{}},"staticQueryHashes":["3294351120","994120085"]}